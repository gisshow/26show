import{r as w,c as y,a as x,s as C,S as k}from"./right.3d485b11.js";import{m as D}from"./logo.85541aea.js";import{d as B}from"./custom-daterange.a4b2a5f3.js";import{l as M,t as S}from"./header.ab7ca0d5.js";import{r as L,L as A,F as R,B as E,U as F,D as N}from"./Down.4e4870ff.js";import{_ as P,r as p,h as T,o as v,c as g,a as u,b as e,e as h,f as H,w as I,F as z,d as U,t as V,i as O}from"./index.9bcd80cb.js";const X={name:"previewmodel",data(){return{ploading:!0,pathname:"1.glb",meuns:[]}},components:{right:w,loading:M,topheader:S},methods:{async previewmodelHandle(o){this.ploading=!0,this.pathname=o,this.loadModel(this.pathname)},async DownloadmodelHandle(o){this.pathname=o,this.downloadFile("./modelimg/"+o)},generateRandomString(o=30){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let l="";for(let d=0;d<o;d++){const i=Math.floor(Math.random()*t.length);l+=t[i]}return l+".glb"},downloadFile(o){const t=document.createElement("a");t.href=o,t.download=this.generateRandomString(),document.body.appendChild(t),t.click(),document.body.removeChild(t)},initEarth(){window.viewer.scene.globe.tileLoadProgressEvent.addEventListener(o=>{o.numberOfTilesLoaded===o.numberOfTilesWaiting&&(this.ploading=!1)})},async loadModel(o){const{scene:t,camera:l,clock:d}=viewer,i=0,a=new Cesium.HeadingPitchRoll(0,0,0),r=Cesium.Cartesian3.fromDegrees(117.136953,31.803038,i),c=Cesium.Transforms.headingPitchRollToFixedFrame(r,a);try{viewer.entities.removeAll();var m=Cesium.Cartesian3.fromDegrees(-122.0744619,44.0503706,0);let n=await Cesium.Model.fromGltfAsync({url:"./modelimg/"+o,modelMatrix:c});t.primitives.removeAll(),t.primitives.add(n),n.readyEvent.addEventListener(()=>{n.activeAnimations.addAll(),this.zoomToModel(n)})}catch{}},initmap(){let o=new Cesium.SkyBox({sources:{positiveX:L,negativeX:A,positiveY:R,negativeY:E,positiveZ:F,negativeZ:N}});const t=new Cesium.Viewer("PriviewMapContainer",{animation:!1,geocoder:!1,homeButton:!1,fullscreenButton:!1,homeButton:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1,skyBox:o,timeline:!1,shouldAnimate:!0,imageryProvider:new Cesium.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),useBrowserRecommendedResolution:!1});window.viewer=t,this.initEarth()},zoomToModel(o){const{scene:t,camera:l,clock:d}=viewer,i=t.screenSpaceCameraController;i.minimumZoomDistance=l.frustum.near,i._minimumRotateRate=1;let{radius:a}=o.boundingSphere;if(a<10){const m=10/a;Cesium.Matrix4.multiplyByUniformScale(o.modelMatrix,m,o.modelMatrix),a*=m}const r=Cesium.Math.toRadians(270),c=0;l.lookAt(o.boundingSphere.center,new Cesium.HeadingPitchRange(r,c,a*3))}},mounted(){D.main(),y.custom(),x.ratycustom(),C.slimScroll(),k.SearchFilter(),B.daterange(),this.initmap()},computed:{getMeuns(){return window.UIConfig.model}},watch:{getMeuns:{handler(o){this.meuns=o},deep:!0,immediate:!0}}},Z={style:{height:"100%"}},G={class:"page-wrapper"},W={class:"main-container main-containermax"},Y={class:"content-wrapper-scroll"},J={class:"content-wrapper"},$={class:"content-wrapper"},j={class:"row gutters"},q={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},K={class:"card"},Q={class:"card-header-lg"},ee={class:"modal fade",id:"addNewDocument","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addNewDocumentLabel","aria-hidden":"true"},te={class:"modal-dialog modal-lg",role:"document"},oe={class:"modal-content"},se={class:"modal-body"},ae={class:"row gutters"},ie={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},le={class:"ant-upload-drag-icon"},ne={class:"card-body"},de={class:"row gutters"},re={class:"top-items-container"},ce={class:"carousel-inner"},me={class:"carousel-item active"},pe=["src","id","alt"],ue={class:"top-item-details"},ve={class:"custom-btn-group mt-3"},ge=["disabled","onClick"],he=["disabled","onClick"],be={class:"modal fade",id:"previewmodel","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addNewDocumentLabel","aria-hidden":"true"},_e={class:"modal-dialog modal-lg",role:"document"},fe={class:"modal-content"},we={class:"modal-body"},ye={style:{overflow:"hidden",height:"100%"}},xe={class:"modal-footer"},Ce=["onClick"];function ke(o,t,l,d,i,a){const r=p("loading"),c=p("right"),m=p("topheader"),n=p("inbox-outlined"),_=p("a-upload-dragger"),f=T("loading");return v(),g("div",Z,[u(r),e("div",G,[u(c),e("div",W,[u(m),e("div",Y,[e("div",J,[e("div",$,[e("div",j,[e("div",q,[e("div",K,[e("div",Q,[t[5]||(t[5]=e("h4",null,"\u4E0A\u4F20\u65B0\u6A21\u578B",-1)),t[6]||(t[6]=e("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addNewDocument"},[e("i",{class:"icon-upload"}),h(" \u4E0A\u4F20\u6A21\u578B ")],-1)),e("div",ee,[e("div",te,[e("div",oe,[t[3]||(t[3]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addNewDocumentLabel"}," \u4E0A\u4F20\u6A21\u578B "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"})])],-1)),e("div",se,[e("form",ae,[t[2]||(t[2]=H('<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"><div class="field-wrapper"><input type="text" class="form-control"><div class="field-placeholder"> \u6A21\u578B\u6807\u9898 </div></div></div><div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"><div class="field-wrapper"><select class="select-single js-states" title="Select Product Category" data-live-search="true"><option>FBX</option><option>OBJ</option><option>DAE</option><option>BLEND</option><option>STL</option></select><div class="field-placeholder"> \u6A21\u578B\u8DEF\u7EBF </div></div></div><div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12"><div class="field-wrapper"><div class="input-group"><input type="text" class="form-control datepicker-opens-left"><span class="input-group-text"><i class="icon-calendar1"></i></span></div><div class="field-placeholder"> \u4E0A\u4F20\u65F6\u95F4 </div></div></div><div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><div class="field-wrapper"><textarea class="form-control" rows="3"></textarea><div class="field-placeholder"> \u6A21\u578B\u63CF\u8FF0 </div></div></div>',4)),e("div",ie,[u(_,{accept:".zip,.RAR,.7z",name:"file",multiple:"true",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:o.handleChange},{default:I(()=>[e("p",le,[u(n)]),t[0]||(t[0]=e("p",{class:"ant-upload-text"}," Drag & Drop or browse ",-1)),t[1]||(t[1]=e("p",{class:"ant-upload-hint"}," We support FBX, OBJ, DAE, BLEND, STL, and many others. You can also upload an archive like ZIP, RAR, or 7z, containing your textures, materials, and mesh. If you aren\u2019t sure, follow our guide or try our exporters to upload directly from your favorite software. ",-1))]),_:1},8,["onChange"])])])]),t[4]||(t[4]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"}," \u5173\u95ED "),e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," \u4E0A\u4F20 ")],-1))])])])]),e("div",ne,[e("div",de,[(v(!0),g(z,null,U(i.meuns,s=>(v(),g("div",{key:s.title,class:"col-xs-12 col-sm-6 col-md-6 col-lg-3 mt-3"},[e("div",re,[e("div",ce,[e("div",me,[e("img",{src:"./modelimg/"+s.img,class:"img-fluid top-item-img",id:s.path,alt:s.title},null,8,pe),e("div",ue,[e("h6",null,V(s.title+s.path),1),t[12]||(t[12]=e("div",{class:"rating-block"},[e("div",{class:"rate2"}),e("div",{class:"rating-count"},"(97)")],-1)),e("div",ve,[e("button",{disabled:!s.Download,"data-bs-placement":"bottom","data-bs-toggle":"tooltip","data-bs-original-title":"\u4E0B\u8F7D\u6A21\u578B",onClick:b=>a.DownloadmodelHandle(s.path),class:"btn btn-info stripes-btn"},t[7]||(t[7]=[e("i",{class:"icon-download"},null,-1),h(" \u4E0B\u8F7D ")]),8,ge),e("button",{disabled:!s.preview,"data-bs-placement":"bottom","data-bs-toggle":"modal","data-bs-target":"#previewmodel","data-bs-original-title":"\u9884\u89C8\u6A21\u578B",onClick:b=>a.previewmodelHandle(s.path),class:"btn btn-outline-primary"},t[8]||(t[8]=[e("i",{class:"icon-codepen"},null,-1),h(" \u9884\u89C8 ")]),8,he),e("div",be,[e("div",_e,[e("div",fe,[t[11]||(t[11]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addNewDocumentLabel"}," \u6A21\u578B\u9884\u89C8 "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"})])],-1)),e("div",we,[O((v(),g("div",ye,t[9]||(t[9]=[e("div",{id:"PriviewMapContainer"},null,-1)]))),[[f,i.ploading]])]),e("div",xe,[t[10]||(t[10]=e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"}," \u5173\u95ED ",-1)),e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:b=>a.DownloadmodelHandle(s.path)}," \u4E0B\u8F7D ",8,Ce)])])])])])])])])])]))),128))])])])])])])]),t[13]||(t[13]=e("div",{class:"app-footer"},"\xA9 Uni Pro Admin 2021",-1))])])])])}const Re=P(X,[["render",ke]]);export{Re as default};
